# 技术选型变了，交互没变 —— 为什么我们还要重复造轮子？

> **导读：** 本文从当下前端与多端开发中普遍存在的组件重复建设问题切入，提出一个关键视角：人类的交互方式并未随着技术选型的变化而发生根本改变。我们正在不断用新技术反复实现本质一致的交互逻辑，而这一模式造成了巨大的生态资源浪费。Proto UI 尝试从交互本质出发，构建一种跨平台、跨技术栈、可复用的交互表达方式，帮助后来者减少重复建设，提升组件一致性与开发效率。

### 人机交互领域的重复开发困境

人机交互在过去几十年中发展迅速，从命令行界面到今日精致的触控操作与动效，仅用了四十年。这期间，技术演进极快。十五年前，大多数公司还难以想象将交互服务的服务端部分拆分为独立项目，而如今“前端”已成为独立的职能模块，拥有成熟的生态体系。

如果你是开发者，提到“编写界面与交互”可能会想到众多技术。使用 Web 技术时，有 React、Vue、Angular 等众多框架可选；如果选择原生平台，Qt、Flutter、Swift、Kotlin、C#、WPF 等也都广泛应用。

从功能角度看，只要能够接受用户输入并将结果输出，使用哪种技术差异并不显著。而在这一视角下，问题便逐渐显现：

> 对于按钮这样的组件，我们是否反复实现了过多次？

这里的“按钮”，即为用户在鼠标下点击、键盘下聚焦并按键、触控设备中点击，即可触发开发者设定逻辑的基本交互组件。它是用户表达意图的基础方式，平台之间在交互本质上并无区别。

尽管功能简单，但我们几乎在每种技术方案中都重新实现了“按钮”，而实际交互方式几乎不变。更深层的问题在于，很多自研组件库无法兼容所有交互载体。

例如，许多组件库缺少对阅读器的支持，影响视觉障碍用户，甚至可能引发无障碍合规风险。再如 Select 下拉组件，在键鼠与触控环境下的行为差异，会导致用户困惑。例如直接将 PC 端 Select 组件照搬至手机界面，体验往往不佳，因为移动端更倾向使用底部弹出选择器，而非表单项下浮层。

这种情况并不难理解：开发者往往专注于构建一套高度定制的组件库，精力难以兼顾所有交互场景。实际中，一套软件可能同时使用多种终端技术（Flutter、React、Vue、Kotlin、Swift 等），不仅难以覆盖所有最佳交互实践，还面临组件库的重复实现问题，且不同平台的实现往往难以复用。

更隐蔽的是，重复建设的问题并不总是显性地反映在某一个团队的工作量上，而是以碎片化和不一致的形式渗透到整个技术社区。几乎每一个大型企业或团队都在“自研”自己的组件库，有的甚至要为不同业务线重做多套，彼此之间少有可复用的部分。很多时候，这些建设被视作“创新”，但在全行业尺度上，它们往往只是对同一问题的重复解法，造成了大量隐性冗余。

比如说，基于 Ant Design 实现完全定制化样式常常十分困难，若要支持无障碍和跨端体验，还需额外开发，例如其为移动端推出独立的 Ant Design Mobile。这些努力体现出当前组件方案在适配性和通用性上的局限。

此外，前端技术快速更迭、设计语言不断演进，也对组件库提出挑战。数年前构建的设计语言及其组件库，可能因新技术或设计标准的出现而“推倒重来”。例如 Vue3 与 Vue2 不兼容，Material3 与早期 Material 在基础概念上存在较大差异，均为组件库过时的真实案例。

可见，我们在人机交互基础建设方面的立足点非常脆弱，而技术的持续演进要求我们不断前行。

### 寻找一个更稳定的立足点

> 人类拥有旧石器时代的大脑，和触及神坛的技术。——诺贝尔物理学奖得主 弗兰克·威尔切克（Frank Wilczek）

我们可以重新梳理当前现状：

1. 人类交互方式长期稳定：通过语言、肢体进行输出；通过视觉、听觉、触觉接收输入。短期内，人类仍受限于身体。
2. 交互载体更替缓慢：从命令行到图形界面、键鼠、触控、再到 VR/XR，其普及过程并不迅速。
3. 技术演进日新月异：Web 框架、终端技术方案层出不穷，但新型交互载体并不多。

前文所述“开发困境”的根源，正是我们的构建立足点处于第 2 与第 3 条之间。如果专注于特定技术构建交互基础设施，我们立足于第 3 条；若聚焦某一类交互载体（如所有触控设备），则立足于第 2 条。

以 Flutter 为例，它位于第 2 与第 3 条之间，兼容触控与桌面平台，具备很高质量。然而它并非覆盖所有设备，因此无法成为完全第 2 条的代表。

当前最具潜力的技术是 Web 生态。此处的 Web 不特指具体框架，而是指 Web 平台整体。尽管存在性能、体积、标准限制等问题，但其跨平台与交互兼容能力出色，具备成为第 1 与第 2 条之间理想立足点的潜力。

考虑到跨端技术能力有限，Web 移植存在性能代价，我们应重新思考：

> 若“描述交互”能够跨技术栈复用，是否存在某种恒定、可抽象复用的部分？

这一部分不属于 Web 或任何具体技术，但我们可以尝试对交互本身建模，Proto UI 正是对此的尝试。

### Proto UI 的实现方式

**Adapter (Prototype) → Component**

- **Prototype** 使用中立描述语言编写，用于定义组件交互与结构，可包含样式与基本逻辑。
- **Adapter** 将 Prototype 转译为具体平台实现，例如 VueAdapter、FlutterAdapter 等，Adapter 不承担运行时职责，通常为编译时转译，零运行时损耗。
- **Component** 是平台上的实际组件，表现与原生组件无异，供开发者直接使用。

---

未完成

---

### 关于前端性能与开发效率的权衡

Proto UI 希望将每个“交互单元”抽象为高性能、可靠且通用的黑盒组件。

就像 Web 开发者不需理解 div 渲染细节，Flutter 开发者不需了解 RenderObject 内部机制一样，Proto UI 旨在提供一个标准化、跨技术的实现模型，不依赖特定平台。

因此，Proto UI 的目标是保持交互组件的简单、高效、纯粹、可拓展，避免重复实现调度机制（如 React Fiber）。通过提供通用组件定义方式，各终端技术可直接使用这些组件，以获得更高性能与良好体验。

业务逻辑与工程实践仍可由框架和工具链承担，而交互组件由 Proto UI 提供，兼具易用性与性能表现。

那高性能如何谈起？如果只是遵守当前使用的技术的最佳实践，性能提升不是应该很有限吗？

实际上 Proto UI 相当于在组件库/交互基建的层面划分了接口层，对于额外的高性能，Proto UI 有潜力将实际渲染替换为 WASM、WebGL、Rust 等性能占有但开发成本较高的方案

Rust、WASM 等新技术尝试优化前端基础模块性能，虽强大却非万能。大多数业务开发仍需依赖高可读性、低上手成本的方式，而非要求所有人都学会如何高性能程序。

Proto UI 的交互标准化接口，为 Rust、WASM、WebGL 等技术的进一步融入 Web 提供了可能，ProtoUI 支持从外部通过 React、Vue 等框架调用某个组件，而实际组件运行时由高性能技术负责，甚至可以抛弃 DOM。

---

未完成

---
